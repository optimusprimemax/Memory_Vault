<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Zombie Runner</title>
<style>
    body {
        margin: 0;
        background: #87ceeb; /* Sky */
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        font-family: Arial, sans-serif;
    }
    canvas {
        background: linear-gradient(#87ceeb, #dff6ff);
        border: 2px solid #000;
    }
</style>
</head>
<body>

<canvas id="game" width="900" height="350"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const GROUND_Y = 270;
let gameSpeed = 5;
let gravity = 0.5;
let gameOver = false;
let score = 0;

// Images
const charImg = new Image();
charImg.src = "char.png";

const zombieImg = new Image();
zombieImg.src = "zombie.png";

const heartImg = new Image();
heartImg.src = "heart.png";

// Player (BIGGER)
const player = {
    x: 100,
    y: GROUND_Y - 80,
    width: 110,
    height: 110,
    velocityY: 0,
    jump() {
        if (this.y >= GROUND_Y - this.height) {
            this.velocityY = -14;
        }
    },
    update() {
        this.velocityY += gravity;
        this.y += this.velocityY;
        if (this.y > GROUND_Y - this.height) {
            this.y = GROUND_Y - this.height;
            this.velocityY = 0;
        }
    },
    draw() {
        ctx.drawImage(charImg, this.x, this.y, this.width, this.height);
    }
};

// Obstacles (TOUCH GROUND)
let obstacles = [];
function spawnObstacle() {
    obstacles.push({
        x: canvas.width,
        y: GROUND_Y - 70,
        width: 50,
        height: 50
    });
}

// Hearts (ON GROUND)
let hearts = [];
function spawnHeart(x) {
    hearts.push({
        x: x,
        y: GROUND_Y - 35,
        width: 45,
        height: 45
    });
}

// Clouds (BACKGROUND)
let clouds = [];
function spawnCloud() {
    clouds.push({
        x: canvas.width,
        y: Math.random() * 120 + 20,
        size: Math.random() * 30 + 40,
        speed: gameSpeed * 0.4
    });
}

// Controls
document.addEventListener("keydown", e => {
    if (e.code === "Space") {
        if (gameOver) location.reload();
        player.jump();
    }
});
canvas.addEventListener("click", () => {
    if (gameOver) location.reload();
    player.jump();
});

// Collision
function collide(a, b) {
    return (
        a.x < b.x + b.width &&
        a.x + a.width > b.x &&
        a.y < b.y + b.height &&
        a.y + a.height > b.y
    );
}

// Game loop
let frame = 0;
function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Clouds
    if (frame % 150 === 0) spawnCloud();
    clouds.forEach((c, i) => {
        c.x -= c.speed;
        ctx.fillStyle = "rgba(255,255,255,0.9)";
        ctx.beginPath();
        ctx.arc(c.x, c.y, c.size, 0, Math.PI * 2);
        ctx.arc(c.x + 30, c.y + 10, c.size - 10, 0, Math.PI * 2);
        ctx.arc(c.x - 30, c.y + 10, c.size - 10, 0, Math.PI * 2);
        ctx.fill();
        if (c.x + c.size < 0) clouds.splice(i, 1);
    });

    // Ground
    ctx.fillStyle = "#444";
    ctx.fillRect(0, GROUND_Y, canvas.width, 5);

    if (!gameOver) {
        frame++;

        player.update();
        player.draw();

        if (frame % 120 === 0) {
            spawnObstacle();
            if (Math.random() > 0.6) spawnHeart(canvas.width + 80);
        }

        // Obstacles
        obstacles.forEach((obs, i) => {
            obs.x -= gameSpeed;
            ctx.drawImage(zombieImg, obs.x, obs.y, obs.width, obs.height);
            if (collide(player, obs)) gameOver = true;
            if (obs.x + obs.width < 0) obstacles.splice(i, 1);
        });

        // Hearts
        hearts.forEach((h, i) => {
            h.x -= gameSpeed;
            ctx.drawImage(heartImg, h.x, h.y, h.width, h.height);
            if (collide(player, h)) {
                score++;
                hearts.splice(i, 1);
            }
            if (h.x + h.width < 0) hearts.splice(i, 1);
        });

        // Score
        ctx.fillStyle = "#000";
        ctx.font = "22px Arial";
        ctx.fillText("❤️ " + score, 20, 30);

    } else {
        ctx.fillStyle = "#000";
        ctx.textAlign = "center";
        ctx.font = "42px Arial";
        ctx.fillText("GAME OVER", canvas.width / 2, canvas.height / 2 - 20);
        ctx.font = "20px Arial";
        ctx.fillText("Press Space or Click to Restart", canvas.width / 2, canvas.height / 2 + 20);
    }

    requestAnimationFrame(animate);
}

animate();
</script>

</body>
</html>
